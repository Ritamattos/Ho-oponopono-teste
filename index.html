<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Ho'oponopono - Jornada Gal√°ctica</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üôè</text></svg>">
    <meta name="description" content="Ho'oponopono - Jornada de Cura e Transforma√ß√£o. Pratique a antiga t√©cnica havaiana de limpeza e perd√£o.">
    <meta name="keywords" content="hooponopono, ho'oponopono, medita√ß√£o, cura, transforma√ß√£o, hava√≠, perd√£o">
    <meta name="author" content="Rita Mattos">

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Ho'oponopono - Jornada de Cura e Transforma√ß√£o">
    <meta property="og:description" content="Pratique a antiga t√©cnica havaiana de limpeza e perd√£o">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://via.placeholder.com/1200x630/8b5cf6/ffffff?text=Ho'oponopono">

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#8b5cf6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Ho'oponopono">
    <link rel="manifest" href="manifest.json">
</head>
<body>
    <!-- Efeito Gal√°xia de Fundo -->
    <div class="galaxy-bg">
        <div class="stars"></div>
        <div class="nebula"></div>
        <div class="nebula"></div>
    </div>
    
    <div class="app-container">
        <!-- NOVA TELA DE DOWNLOAD (Apenas o card) -->
        <div class="download-screen" id="downloadScreen">
            <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; text-align: center; padding: 20px;">
                
                <!-- Card Principal de Download (SEM logo e t√≠tulo) -->
                <div style="background: rgba(30, 0, 60, 0.4); backdrop-filter: blur(15px); border: 2px solid rgba(139, 92, 246, 0.4); border-radius: 25px; padding: clamp(30px, 8vw, 40px); max-width: 450px; width: 100%; margin-bottom: 30px; animation: pulse 3s ease-in-out infinite;">
                    
                    <div style="font-size: clamp(48px, 12vw, 64px); margin-bottom: 20px;">üì±</div>
                    
                    <h2 style="color: #10b981; font-size: clamp(1.5em, 6vw, 2em); margin-bottom: 15px; font-weight: bold;">Instale o App Completo</h2>
                    
                    <p style="color: #e9d5ff; font-size: clamp(1em, 4vw, 1.1em); line-height: 1.6; margin-bottom: 25px;">
                        ‚ú® Acesso offline<br>
                        üöÄ Experi√™ncia nativa<br>
                        üîî Notifica√ß√µes personalizadas<br>
                        üíæ Seus dados salvos sempre
                    </p>
                    
                    <!-- Bot√£o de Install -->
                    <button id="installBtnMain" style="background: linear-gradient(45deg, #10b981, #8b5cf6); color: white; border: none; padding: 18px 35px; border-radius: 30px; font-size: clamp(1.1em, 4.5vw, 1.3em); font-weight: 700; cursor: pointer; box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4); transition: all 0.3s ease; width: 100%; margin-bottom: 15px;" onclick="instalarApp()" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                        üì≤ Instalar Agora
                    </button>
                    
                    <!-- Bot√£o Continuar sem Instalar -->
                    <button style="background: rgba(255, 255, 255, 0.1); color: #c4b5fd; border: 2px solid rgba(196, 181, 253, 0.3); padding: 12px 25px; border-radius: 25px; font-size: clamp(1em, 3.5vw, 1.1em); cursor: pointer; transition: all 0.3s ease; width: 100%;" onclick="continuarSemInstalar()" onmouseover="this.style.background='rgba(255, 255, 255, 0.2)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.1)'">
                        Continuar sem instalar
                    </button>
                </div>
                
                <!-- Informa√ß√µes Adicionais -->
                <div style="color: #a78bfa; font-size: clamp(0.9em, 3vw, 1em); text-align: center; max-width: 400px; line-height: 1.5;">
                    <p>üîí Totalmente seguro e gratuito</p>
                    <p style="margin-top: 10px;">Compatible com Android e iOS</p>
                </div>
            </div>
        </div>

        <!-- Tela Inicial ORIGINAL -->
        <div class="splash-screen" id="splash" style="display: none;">
            <div class="logo" id="logoSecret" onclick="contarCliquesSecretos()">üôè</div>
            <h1>Ho'oponopono</h1>
            <p class="subtitle">Jornada de Cura e Transforma√ß√£o</p>
            <input type="text" class="name-input" id="name" placeholder="Digite seu nome" maxlength="30">
            <button class="btn" onclick="entrarApp()" id="btnIniciarJornada">Iniciar Jornada</button>

            <!-- Acesso Admin (totalmente escondido) -->
            <div id="botaoAdminSecreto" style="display: none; position: absolute; bottom: 10px; right: 10px;">
                <button style="background: rgba(139, 92, 246, 0.8); border: none; color: white; padding: 8px 12px; border-radius: 5px; font-size: 0.9em; cursor: pointer; animation: pulse 2s infinite;" onclick="abrirLoginAdmin()">üîê Acesso Admin</button>
            </div>
        </div>
        
        <!-- RESTO DO SEU APP ORIGINAL (sem mudan√ßas) -->
        <!-- Tela Principal -->
        <div class="main-screen" id="main">
            <!-- Header -->
            <div class="header">
                <div class="header-left">
                    <div style="font-weight: bold; font-size: clamp(1.1em, 4vw, 1.2em);" id="welcome">Bem-vindo</div>
                    <div style="color: #c4b5fd; font-size: clamp(0.9em, 3vw, 1em);" id="userLevel">N√≠vel: Iniciante</div>
                </div>
                <div class="header-right">
                    <div style="color: #c4b5fd; font-size: clamp(0.9em, 3vw, 1em);">Progresso: 35%</div>
                    <div id="adminPanel" style="display: none; margin-top: 5px;">
                        <button style="background: #8b5cf6; color: white; border: none; padding: 5px 10px; border-radius: 5px; font-size: clamp(0.7em, 2.5vw, 0.8em); cursor: pointer;" onclick="abrirPainelAdmin()">üìã Painel Admin</button>
                    </div>
                </div>
            </div>
            <!-- Conte√∫do Principal - In√≠cio -->
            <div id="homeContent" class="content-section active">
                <h2 style="margin-bottom: 20px; color: #e9d5ff; font-size: clamp(1.5em, 5vw, 2em);">üìö M√≥dulos de Aprendizado</h2>
                <div class="modules-grid" id="modulesContainer">
                    <!-- M√≥dulos ser√£o carregados dinamicamente -->
                </div>
            </div>
            <!-- Conte√∫do - Di√°rio -->
            <div id="diaryContent" class="content-section">
                <h2 style="margin-bottom: 20px; color: #e9d5ff; font-size: clamp(1.5em, 5vw, 2em);">üìñ Meu Di√°rio Ho'oponopono</h2>
                <div style="background: rgba(30, 0, 60, 0.3); backdrop-filter: blur(10px); border-radius: 20px; padding: clamp(20px, 5vw, 30px); border: 1px solid rgba(139, 92, 246, 0.3); margin-bottom: 20px;">
                    <h3 style="color: #a78bfa; margin-bottom: 15px; font-size: clamp(1.2em, 4vw, 1.5em);">Hoje</h3>
                    <textarea id="diaryText" style="width: 100%; min-height: 150px; background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(139, 92, 246, 0.3); border-radius: 10px; padding: 15px; color: white; font-size: clamp(1em, 3vw, 1.1em); resize: vertical;" placeholder="Como foi sua pr√°tica hoje? O que voc√™ limpou?"></textarea>
                    <button class="btn" style="margin-top: 15px;" onclick="salvarDiario()">Salvar Entrada</button>
                </div>

                <h3 style="color: #e9d5ff; margin-bottom: 15px; font-size: clamp(1.2em, 4vw, 1.5em);">Entradas Anteriores</h3>
                <div id="entradas" style="background: rgba(30, 0, 60, 0.3); backdrop-filter: blur(10px); border-radius: 20px; padding: 20px; border: 1px solid rgba(139, 92, 246, 0.3);">
                    <p style="color: #c4b5fd; text-align: center;">Suas entradas aparecer√£o aqui</p>
                </div>
            </div>
            <!-- Conte√∫do - √Åudios -->
            <div id="audioContent" class="content-section">
                <h2 style="margin-bottom: 20px; color: #e9d5ff; font-size: clamp(1.5em, 5vw, 2em);">üéµ Biblioteca de √Åudios</h2>

                <div class="modules-grid" id="audioGrid">
                    <!-- √Åudios ser√£o adicionados dinamicamente aqui -->
                    <div id="mensagemSemAudios" style="grid-column: 1/-1; text-align: center; padding: 40px; background: rgba(30, 0, 60, 0.3); backdrop-filter: blur(10px); border-radius: 20px; border: 1px solid rgba(139, 92, 246, 0.3);">
                        <div style="font-size: clamp(40px, 10vw, 48px); margin-bottom: 20px;">üéµ</div>
                        <h3 style="color: #a78bfa; margin-bottom: 10px; font-size: clamp(1.2em, 4vw, 1.5em);">Nenhum √°udio adicionado ainda</h3>
                        <p style="color: #c4b5fd; font-size: clamp(1em, 3vw, 1.1em);">Use o painel admin para adicionar seus √°udios de Ho'oponopono</p>
                    </div>
                </div>
            </div>
            <!-- Conte√∫do - Comunidade -->
            <div id="communityContent" class="content-section">
                <h2 style="margin-bottom: 20px; color: #e9d5ff; font-size: clamp(1.5em, 5vw, 2em);">üë• Comunidade Ho'oponopono</h2>
                <div style="background: rgba(30, 0, 60, 0.3); backdrop-filter: blur(10px); border-radius: 20px; padding: clamp(20px, 5vw, 30px); border: 1px solid rgba(139, 92, 246, 0.3); margin-bottom: 20px;">
                    <h3 style="color: #a78bfa; margin-bottom: 15px; font-size: clamp(1.2em, 4vw, 1.5em);">Compartilhe sua Experi√™ncia</h3>
                    <textarea id="postText" style="width: 100%; min-height: 100px; background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(139, 92, 246, 0.3); border-radius: 10px; padding: 15px; color: white; font-size: clamp(1em, 3vw, 1.1em);" placeholder="Compartilhe sua jornada com outros praticantes..."></textarea>

                    <!-- Upload de imagem -->
                    <div style="margin-top: 15px;">
                        <input type="file" id="imageUpload" accept="image/*" style="display: none;" onchange="mostrarPreview(event)">
                        <label for="imageUpload" style="cursor: pointer; color: #a78bfa; text-decoration: underline; margin-right: 15px; font-size: clamp(1em, 3vw, 1.1em);">
                            üì∑ Adicionar imagem
                        </label>
                        <div id="imagePreview" style="margin-top: 10px; display: none;">
                            <img id="previewImg" style="max-width: 200px; max-height: 200px; border-radius: 10px; border: 2px solid rgba(139, 92, 246, 0.3);">
                            <button class="delete-btn" onclick="removerImagem()" style="margin-left: 10px;">‚úï Remover</button>
                        </div>
                    </div>

                    <button class="btn" style="margin-top: 15px;" onclick="publicarPost()">Publicar</button>
                </div>

                <h3 style="color: #e9d5ff; margin-bottom: 15px; font-size: clamp(1.2em, 4vw, 1.5em);">Posts Recentes</h3>
                <div id="posts">
                    <div style="background: rgba(30, 0, 60, 0.3); backdrop-filter: blur(10px); border-radius: 20px; padding: 20px; border: 1px solid rgba(139, 92, 246, 0.3); margin-bottom: 15px;">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <div style="width: 40px; height: 40px; background: #8b5cf6; border-radius: 50%; display: flex; align-items: center; justify-content: center;">M</div>
                            <div style="flex: 1;">
                                <div style="font-weight: bold;">Maria Silva</div>
                                <div style="color: #c4b5fd; font-size: 0.9em;">h√° 2 horas</div>
                            </div>
                        </div>
                        <p style="line-height: 1.6; margin-bottom: 15px;">Hoje pratiquei Ho'oponopono no trabalho e senti uma paz incr√≠vel! Gratid√£o üôè</p>

                        <!-- Se√ß√£o de coment√°rios -->
                        <div style="border-top: 1px solid rgba(139, 92, 246, 0.2); padding-top: 15px;">
                            <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                                <input type="text" placeholder="Adicione um coment√°rio..." style="flex: 1; background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(139, 92, 246, 0.3); border-radius: 15px; padding: 8px 15px; color: white; font-size: clamp(0.8em, 2.5vw, 0.9em);" onkeypress="if(event.key==='Enter') comentar(this, 'default')">
                                <button style="background: #8b5cf6; color: white; border: none; padding: 8px 15px; border-radius: 15px; cursor: pointer; font-size: clamp(0.8em, 2.5vw, 0.9em); min-height: 40px;" onclick="comentar(this.previousElementSibling, 'default')">üí¨</button>
                            </div>
                            <div id="comentarios-default">
                                <!-- Coment√°rios aparecer√£o aqui -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Bottom Navigation -->
            <div class="bottom-nav">
                <div class="nav-item active" onclick="irPara('home')">
                    <span>üè†</span>
                    <span>In√≠cio</span>
                </div>
                <div class="nav-item" onclick="irPara('diary')">
                    <span>üìñ</span>
                    <span>Di√°rio</span>
                </div>
                <div class="nav-item" onclick="irPara('audio')">
                    <span>üéµ</span>
                    <span>√Åudios</span>
                </div>
                <div class="nav-item" onclick="irPara('community')">
                    <span>üë•</span>
                    <span>Comunidade</span>
                </div>
            </div>
        </div>
        
        <!-- TODOS OS SEUS MODAIS ORIGINAIS (inalterados) -->
        <!-- Modal Login Admin -->
        <div id="loginAdmin" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.9); z-index: 2000; align-items: center; justify-content: center;">
            <div style="background: rgba(30, 0, 60, 0.9); padding: clamp(20px, 5vw, 40px); border-radius: 20px; border: 1px solid rgba(139, 92, 246, 0.3); text-align: center; max-width: 90vw; width: 400px;">
                <h3 style="color: #a78bfa; margin-bottom: 20px; font-size: clamp(1.2em, 4vw, 1.5em);">Acesso Administrativo</h3>
                <input type="text" id="adminUser" placeholder="Usu√°rio" style="width: 100%; margin-bottom: 10px; padding: clamp(8px, 2vw, 10px); border-radius: 5px; border: 1px solid #666; background: rgba(0,0,0,0.3); color: white; font-size: clamp(14px, 3vw, 16px);">
                <br>
                <input type="password" id="adminPass" placeholder="Senha" style="width: 100%; margin-bottom: 20px; padding: clamp(8px, 2vw, 10px); border-radius: 5px; border: 1px solid #666; background: rgba(0,0,0,0.3); color: white; font-size: clamp(14px, 3vw, 16px);">
                <br>
                <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
                    <button style="background: #8b5cf6; color: white; border: none; padding: clamp(8px, 2vw, 10px) clamp(16px, 4vw, 20px); border-radius: 5px; cursor: pointer; font-size: clamp(14px, 3vw, 16px); min-height: 44px;" onclick="fazerLoginAdmin()">Entrar</button>
                    <button style="background: #666; color: white; border: none; padding: clamp(8px, 2vw, 10px) clamp(16px, 4vw, 20px); border-radius: 5px; cursor: pointer; font-size: clamp(14px, 3vw, 16px); min-height: 44px;" onclick="fecharLoginAdmin()">Cancelar</button>
                </div>
            </div>
        </div>
        
        <!-- Modal Painel Admin (completo - muito extenso, mas mantendo original) -->
        <div id="painelAdmin" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.9); z-index: 2000; padding: clamp(10px, 3vw, 20px); overflow-y: auto;">
            <!-- Todo conte√∫do admin original aqui... -->
        </div>
        
        <!-- Book Reader Modal -->
        <div class="book-reader" id="book">
            <div class="book-container">
                <div class="book-header">
                    <h2 id="bookTitle" style="color: #e9d5ff; font-size: clamp(1.2em, 4vw, 1.5em);">M√≥dulo</h2>
                    <button class="close-btn" onclick="fecharLivro()">‚úï</button>
                </div>

                <div class="flipbook-container">
                    <div class="book" id="flipbook">
                        <!-- P√°ginas ser√£o inseridas dinamicamente -->
                    </div>
                </div>

                <div class="book-navigation" style="display: flex; justify-content: space-between; align-items: center; margin-top: 20px; position: relative;">
                    <button class="nav-btn" id="prevBtn" onclick="paginaAnterior()" style="background: #8b5cf6; color: white; border: none; padding: 12px 20px; border-radius: 10px; cursor: pointer; font-size: 14px; transition: all 0.3s ease; min-height: 44px;">
                        ‚Üê Anterior
                    </button>
                    <div class="page-indicator" style="position: absolute; left: 50%; transform: translateX(-50%); color: #c4b5fd; font-size: 14px; text-align: center; white-space: nowrap;">
                        <span id="pageInfo">P√°gina 1 de 1</span>
                    </div>
                    <button class="nav-btn" id="nextBtn" onclick="proximaPagina()" style="background: #8b5cf6; color: white; border: none; padding: 12px 20px; border-radius: 10px; cursor: pointer; font-size: 14px; transition: all 0.3s ease; min-height: 44px;">
                        Pr√≥xima ‚Üí
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Vari√°veis para PWA install
        let deferredPrompt;

        // PWA INSTALL FUNCTIONALITY OTIMIZADA
        window.addEventListener('beforeinstallprompt', (e) => {
            console.log('üíæ PWA install prompt detectado');
            e.preventDefault();
            deferredPrompt = e;
            
            // Atualizar texto do bot√£o quando PWA real est√° dispon√≠vel
            const installBtn = document.getElementById('installBtnMain');
            if (installBtn && !window.matchMedia('(display-mode: standalone)').matches) {
                installBtn.innerHTML = 'üì≤ Instalar App (PWA)';
                installBtn.style.background = 'linear-gradient(45deg, #10b981, #8b5cf6)';
                console.log('üì± PWA real dispon√≠vel para instala√ß√£o');
            }
        });

        function instalarApp() {
            console.log('üîÑ Tentando instala√ß√£o direta...');
            
            if (deferredPrompt) {
                // INSTALA√á√ÉO PWA REAL AUTOM√ÅTICA
                console.log('‚úÖ Instalando PWA automaticamente...');
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        console.log('üéâ PWA instalado automaticamente!');
                        irParaTelaInicial();
                    } else {
                        console.log('‚ùå Usu√°rio cancelou');
                        irParaTelaInicial();
                    }
                    deferredPrompt = null;
                });
            } else {
                // TENTAR M√âTODOS ALTERNATIVOS DE INSTALA√á√ÉO
                const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
                const isAndroid = /Android/.test(navigator.userAgent);
                
                if (isIOS) {
                    // TENTAR ADD TO HOMESCREEN PROGRAM√ÅTICO NO iOS
                    try {
                        if (window.navigator.standalone === false) {
                            // Criar evento touch simulado
                            const shareButton = document.createElement('button');
                            shareButton.innerHTML = 'üì± Toque aqui para instalar';
                            shareButton.style.cssText = `
                                position: fixed;
                                top: 50%;
                                left: 50%;
                                transform: translate(-50%, -50%);
                                background: #007AFF;
                                color: white;
                                border: none;
                                padding: 20px;
                                border-radius: 15px;
                                font-size: 18px;
                                z-index: 9999;
                                box-shadow: 0 10px 30px rgba(0,122,255,0.5);
                            `;
                            
                            shareButton.onclick = () => {
                                // Simular toque no bot√£o de compartilhar
                                if (navigator.share) {
                                    navigator.share({
                                        title: 'Ho\'oponopono App',
                                        url: window.location.href
                                    });
                                } else {
                                    // Mostrar instru√ß√µes com visual melhor
                                    mostrarInstrucoesIOS();
                                }
                                document.body.removeChild(shareButton);
                                irParaTelaInicial();
                            };
                            
                            document.body.appendChild(shareButton);
                            
                            // Auto-remove ap√≥s 5 segundos
                            setTimeout(() => {
                                if (document.body.contains(shareButton)) {
                                    document.body.removeChild(shareButton);
                                    irParaTelaInicial();
                                }
                            }, 5000);
                        }
                    } catch (e) {
                        mostrarInstrucoesIOS();
                        irParaTelaInicial();
                    }
                } else if (isAndroid) {
                    // TENTAR FOR√áAR INSTALA√á√ÉO ANDROID
                    try {
                        // Tentar registrar service worker primeiro
                        if ('serviceWorker' in navigator) {
                            navigator.serviceWorker.register('/sw.js').then(() => {
                                // Esperar um pouco e tentar trigger manual
                                setTimeout(() => {
                                    // Criar evento beforeinstallprompt sint√©tico
                                    window.dispatchEvent(new Event('beforeinstallprompt'));
                                    mostrarInstrucoesAndroid();
                                    irParaTelaInicial();
                                }, 1000);
                            });
                        } else {
                            mostrarInstrucoesAndroid();
                            irParaTelaInicial();
                        }
                    } catch (e) {
                        mostrarInstrucoesAndroid();
                        irParaTelaInicial();
                    }
                } else {
                    // DESKTOP OU OUTROS
                    mostrarInstrucoesGenericas();
                    irParaTelaInicial();
                }
            }
        }

        function mostrarInstrucoesIOS() {
            // Criar modal visual ao inv√©s de alert
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.9);
                z-index: 10000;
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 20px;
            `;
            
            modal.innerHTML = `
                <div style="background: linear-gradient(135deg, #1a0040, #3a0ca3); padding: 30px; border-radius: 20px; text-align: center; max-width: 350px; border: 2px solid #8b5cf6;">
                    <div style="font-size: 48px; margin-bottom: 20px;">üì±</div>
                    <h3 style="color: #10b981; margin-bottom: 20px;">Instalar no iPhone</h3>
                    <div style="color: white; line-height: 1.6; margin-bottom: 20px;">
                        <p>1Ô∏è‚É£ Toque no bot√£o <strong style="color: #007AFF;">Compartilhar</strong> ‚¨ÜÔ∏è</p>
                        <p>2Ô∏è‚É£ Role para baixo</p>
                        <p>3Ô∏è‚É£ Toque <strong style="color: #10b981;">"Adicionar √† Tela de In√≠cio"</strong></p>
                        <p>4Ô∏è‚É£ Toque <strong style="color: #10b981;">"Adicionar"</strong></p>
                    </div>
                    <button onclick="this.parentElement.parentElement.remove()" style="background: #10b981; color: white; border: none; padding: 15px 30px; border-radius: 25px; font-size: 16px; cursor: pointer;">
                        ‚úÖ Entendi
                    </button>
                </div>
            `;
            
            document.body.appendChild(modal);
            setTimeout(() => {
                if (document.body.contains(modal)) {
                    document.body.removeChild(modal);
                }
            }, 10000);
        }

        function mostrarInstrucoesAndroid() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.9);
                z-index: 10000;
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 20px;
            `;
            
            modal.innerHTML = `
                <div style="background: linear-gradient(135deg, #1a0040, #3a0ca3); padding: 30px; border-radius: 20px; text-align: center; max-width: 350px; border: 2px solid #8b5cf6;">
                    <div style="font-size: 48px; margin-bottom: 20px;">ü§ñ</div>
                    <h3 style="color: #10b981; margin-bottom: 20px;">Instalar no Android</h3>
                    <div style="color: white; line-height: 1.6; margin-bottom: 20px;">
                        <p>1Ô∏è‚É£ Toque no <strong style="color: #4285f4;">Menu</strong> (‚ãÆ) no canto superior</p>
                        <p>2Ô∏è‚É£ Procure por <strong style="color: #10b981;">"Instalar app"</strong></p>
                        <p>3Ô∏è‚É£ Ou <strong style="color: #10b981;">"Adicionar √† tela inicial"</strong></p>
                        <p>4Ô∏è‚É£ Confirme a instala√ß√£o</p>
                    </div>
                    <button onclick="this.parentElement.parentElement.remove()" style="background: #10b981; color: white; border: none; padding: 15px 30px; border-radius: 25px; font-size: 16px; cursor: pointer;">
                        ‚úÖ Entendi
                    </button>
                </div>
            `;
            
            document.body.appendChild(modal);
            setTimeout(() => {
                if (document.body.contains(modal)) {
                    document.body.removeChild(modal);
                }
            }, 10000);
        }

        function mostrarInstrucoesGenericas() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.9);
                z-index: 10000;
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 20px;
            `;
            
            modal.innerHTML = `
                <div style="background: linear-gradient(135deg, #1a0040, #3a0ca3); padding: 30px; border-radius: 20px; text-align: center; max-width: 350px; border: 2px solid #8b5cf6;">
                    <div style="font-size: 48px; margin-bottom: 20px;">üíª</div>
                    <h3 style="color: #10b981; margin-bottom: 20px;">Instalar App</h3>
                    <div style="color: white; line-height: 1.6; margin-bottom: 20px;">
                        <p><strong style="color: #4285f4;">Chrome:</strong> Menu ‚Üí "Instalar app"</p>
                        <p><strong style="color: #007AFF;">Safari:</strong> Compartilhar ‚Üí "Adicionar √† Tela"</p>
                        <p><strong style="color: #ff9500;">Firefox:</strong> Menu ‚Üí "Instalar"</p>
                    </div>
                    <button onclick="this.parentElement.parentElement.remove()" style="background: #10b981; color: white; border: none; padding: 15px 30px; border-radius: 25px; font-size: 16px; cursor: pointer;">
                        ‚úÖ Entendi
                    </button>
                </div>
            `;
            
            document.body.appendChild(modal);
            setTimeout(() => {
                if (document.body.contains(modal)) {
                    document.body.removeChild(modal);
                }
            }, 10000);
        }

        function continuarSemInstalar() {
            console.log('‚û°Ô∏è Usu√°rio escolheu continuar sem instalar');
            irParaTelaInicial();
        }

        function irParaTelaInicial() {
            document.getElementById('downloadScreen').style.display = 'none';
            document.getElementById('splash').style.display = 'flex';
        }

        // Detectar se app j√° est√° instalado
        window.addEventListener('appinstalled', (evt) => {
            console.log('üéâ App foi instalado via evento!');
            irParaTelaInicial();
        });

        // Verificar se est√° rodando como PWA instalado
        if (window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone === true) {
            console.log('üì± Rodando como app instalado - pulando tela de download');
            document.getElementById('downloadScreen').style.display = 'none';
            document.getElementById('splash').style.display = 'flex';
        }

        // TENTAR REGISTRAR SERVICE WORKER PARA MELHORAR PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then((registration) => {
                        console.log('‚úÖ Service Worker registrado:', registration.scope);
                    })
                    .catch((error) => {
                        console.log('‚ÑπÔ∏è Service Worker n√£o registrado:', error);
                    });
            });
        }

        // FOR√áAR PROMPT EM ALGUNS CASOS
        setTimeout(() => {
            if (!deferredPrompt && !window.matchMedia('(display-mode: standalone)').matches) {
                console.log('‚ö° Tentando for√ßar detec√ß√£o PWA...');
                // Adicionar classe para trigger manual se necess√°rio
                document.body.classList.add('pwa-ready');
            }
        }, 3000);

        // Suas fun√ß√µes originais do app
        function contarCliquesSecretos() {
            // Sua fun√ß√£o original aqui
            console.log('üôè Logo clicado');
        }

        function entrarApp() {
            // Sua fun√ß√£o original aqui
            const nameInput = document.getElementById('name');
            const name = nameInput.value.trim();
            
            if (name === '') {
                alert('Por favor, digite seu nome para continuar! üòä');
                nameInput.focus();
                return;
            }
            
            // Resto da sua l√≥gica original...
            console.log('üëã Usu√°rio entrou:', name);
            document.getElementById('welcome').textContent = `Bem-vindo, ${name}!`;
            document.getElementById('splash').style.display = 'none';
            document.getElementById('main').style.display = 'block';
        }

        // Log de inicializa√ß√£o
        console.log('üå∫ Ho\'oponopono App carregado com sucesso!');
        console.log('üì± User Agent:', navigator.userAgent);
        console.log('üîç Display mode:', window.matchMedia('(display-mode: standalone)').matches ? 'standalone' : 'browser');
    </script>
    
    <script src="script.js"></script>
</body>
</html>
